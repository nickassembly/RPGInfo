@using RPGInfo.Web.Models
@model List<Note>

<div class="container">
    @foreach (var note in Model)
    {
        <div id="noteToEdit" class="col-md-12">
            <h1 id="noteTitle">@note.NoteTitle</h1>
            <p id="noteContent">
                @note.NoteContent
            </p>
            <div>
                <span class="badge"> Added: @note.NoteDate</span>
                <div>
                    <button type="button" id="" onclick="editNote(@note.Id)" class="btn btn-primary">Edit Note</button>
                </div>
            </div>
            <hr>
        </div>

    }
    <div class="bs-example">
        <!-- Modal HTML -->
        <div id="myModal" class="modal fade" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Edit Note</h5>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="form-group col-6">
                                <label for="NoteTitle">Title</label>
                                <input type="text" id="noteTitle" name="NoteTitle" value="" class="form-control">
                            </div>

                            <div class="form-group  col-6">
                                <label for="NoteDate">Date</label>
                                <input type="datetime" id="noteDate" onchange="validateDate()" value="" name="NoteDate" class="form-control">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="NoteContent">Content</label>
                            <input type="text" id="noteContent" name="NoteContent" value="" class="form-control">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-primary">Save</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .bs-example {
        margin: 20px;
    }
</style>

<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>

<script type="text/javascript">

    function editNote(id){
        console.log("edit clicked: " + id);
        $('input[id="noteTitle"]').val(id);
        $("#myModal").modal('show');
    }

    function validateDate() {
      var dateInput = $('input[id="noteDate"]').val();

      var match = dateInput.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);

      if (!match) {
        $('input[id="noteDate"]').val('');
      } else {
        $('input[id="noteDate"]').val(dateInput);
      }
   }


</script>