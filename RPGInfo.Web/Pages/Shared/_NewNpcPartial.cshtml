@using RPGInfo.Web.Models
@model List<RelatedNpc>

<h4>Add Npc Relationship</h4>

@*TODO: Display related characters
TODO: Revise Character Detail design page display*@

<form asp-page-handler="AddNpcs" method="post" enctype="multipart/form-data" class="mt-4 mb-4">
    <div class="row">
        <div class="form-group col-6">
            <label for="Name">Name</label>
            <input type="text" id="npcName" name="Name" class="form-control">
            <label for="Race">Race</label>
            <input type="text" id="npcRace" name="Race" class="form-control">
        </div>

        <div class="form-group  col-6">
            <label for="Class">Class</label>
            <input type="text" id="npcClass" name="Class" class="form-control">
            <label for="Relationship">Relationship</label>
            <input type="text" id="npcRelationship" name="Relationship" class="form-control">
        </div>
    </div>
    <div class="row">
        <div class="form-group col-12">
            <label for="Background">Background</label>
            <input type="text" id="npcBackground" name="Background" class="form-control">
        </div>
    </div>

    <button type="submit" onClick="addCurrentNpc()" id="addNoteForm" class="btn btn-primary">Add</button>
</form>

<ul>
    @foreach (var relationship in @Model)
    {
        <li>@relationship.Name </li>
    }
</ul>

<script src="/lib/jquery/dist/jquery.js"></script>
<script src="/lib/bootstrap/dist/js/bootstrap.js"></script>

<script>

  function addCurrentNpc() {
      var newNpc = new Object();
      newNpc.Name = $('#npcName').text();
      newNpc.Description = $('#npcDescription').text();
      newNpc.Backstory = $('#npcBackstory').text();
      newNpc.Class = $('#npcClass').text();
      newNpc.Race = $('#npcRace').text();
      $.ajax({
          type: "POST",
          url: window.location.href + '?handler=AddNpcs',
          data: newNpc,
          contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
      });
   window.location.reload();
  };

</script>